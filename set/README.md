# Наборы символов (символьные классы)
Соответствие набору символов.  
Набор символов - соответствие любому одному символу из этого набора.

- `.` - набор символов, всех символов

Сужаем выражение, чтобы оно соответствовало не многому. Два трюка регулярных выражений: соответствие тому что вы хотите, а также только тому что вы хотите.

## Defining a character set (определение набора символов)
- `[ ]` - показывают набор символов соответствующие любому из нескольких символов этого набора

Пример:
- `[аоу]` соответствует любой одной гласной букве: д`о`м
- `gr[ea]y` соответствует `grey`, `gray`
- `gr[ea]t` - не соответствует `great`, потому что нужно соответствие одной букве `e` или `a`
  - для соответствия нужен еще один набор символов `gr[ea][ea]t`: great, greet, graat и т.д.

Пример `c[aeiou]t`:

    The cow, camel, and cat communicated.

## Character ranges (диапазон символов внутри набора символов)
- `-` - дефис, диапазон символов, располагается между двумя символвами, является метасимволом только находясь внутри набора символов

Примеры:
- `[0-9]` - все цифры от 0 до 9
- `[50-99]` - тоже самое что и от 0 до 9 (потому что это символы строки, а не числа)
- `[3-7]` - все цифры от 3 до 7
- `[A-Za-z]` - весь алфавит в заглавными и строчными буквами
- `[a-ek-ou-y]`
- `[0-9A-Z]` - все числа и весь алфавит заглавных букв

## Negative character sets (отрицающий набор символов)
Отрицательный набор символов - соответствие любому символу которого нет в наборе. Первый символ в наборе символов `[^0-9]`. Соответсвует одному символу.

- `^` - отрицательный набор символов (каре)
- не один из нескольких символов
- помещается первым символом внутри набора символов
- отрицает этот набор символов

У каре есть несколько значений в регулярных выражениях.
- первое значение когда он находится внутри набора символов `[ ]` и является первым символом этого набора

Пример:
- `[^0-3]` - выбрать все символы кроме 0 1 2 3
- `see[^mn]` - соответствует seek, sees, не соответствует seem, seen
- `see[^mn]` - соответствует `see ` с пробелом, не соответствует `see` без пробела

## Metacharacters inside character sets (метасимволы внутри наборов символов)
Метасимволы внутри набора символов уже экранированы.
- `h[a.i]t` - соответствует h.t, hat, не соответствует hot
- точка внутри набора символов это уже не джокер, а обычная точка
- можно перед точко поставить обратны слеш, но это ничего не изменит
- исключения это метасимволы связанные с набором символов: `] - ^ \` (эти символы нужно экранировать, если хотите получить простые символы, а не метасимволы)

Не всегда нужно экранировать, в зависимости от движк арегуярного выражения, например дефис в дате можно не экранировать если перед ней нет символа:

    /2002[-/]02/

В скобках слеш обычный символ который ставят между числами даты, а дефис экранировать не надо, это тоже обычный символ который ставят между чпислами даты.

Здесь экранировать надо:

    /file[0-\_]1/ - от нуля до обратного слеша, подчеркивание file-1 не соответствует
    /file[0\-\_]1/ - file\1 не соответствует
    /file[0\-\\_]1/ - ноль, дефис, обратный слеш, подчеркивание соответствуют

Пример:
- `var[([][0-9][)\]]` - соответсвует `var(3)`, `var[4]`, регулярное выражение состоит из трех наборов символов:
  - `[([]` - открывающие скобки `(`, `[`
  - `[0-9]` - диапазон чисел
  - `[)\]]` - закрывающие скобки `)`, `]`, где квадратную закрывающую скобку нужно экранировать
- в некоторых движках, закрывающую квадратную скобку идущую после открывающей можно не экранировать она считается за обычный символ `[])]`

Не нужно экранировать никакие метасимволы, кроме метасимволов которые связаны с наборами символов.

## Shorthand character sets (условные обозначения набров символов)
- `\d` - digit `[0-9]` - цифра
- `\w` - word character `[a-zA-Z0-9_]` - буква, цифра и подчеркиание
- `\s` - whitespace `[ \t\r\n]` - пробельный символ
- `\D` - not digit `[^0-9]` -  не цифра
- `\W` - not word character `[^a-zA-Z0-9_]` - не буква, цифра и подчеркиание
- `\S` - not whitespace `[^ \t\r\n]` - не пробельный символ

`\w` - подчеркивание это буквенный символ, а дефис не буквенный.

Примеры:
- `/\d\d\d\d/` - matches "1984", but not "text",
- `/\w\w\w/` - matches "ABC", "123", "1_A",
- `/\w\s\w\w/`, `/\w \w\w/` - matches "I am", but not "Am I",
- `/[\w\-]/` - matches as word character or hyphen (useful),
- `/[\d\s]/` - matches any digit or whitespace cheracter,
- `/[^\d]/` - is the same as `/\D/` and `/^0-9/`.

Внимательно используйте `^` - `/[^\d\s]/` не равно `[\D\S]`, хоть это на первый взгляд может показаться равным:
- `/[^\d\s]/` - не цифра или пробельный символ (NOT digit OR space character),
- `[\D\S]` - либо не цифра, либо не пробельный символ (EITHER NOT digit OR NOT space character),

Проверьте с `123 456 789 abc`
- `/[^\d\s]/` - 123 456 789 `abc` - не цифра и не пробел
- `[\D\S]` - `123 456 789 abc` - не цифра или не пробел

Чаще всего используют строчные `\d`, `\s`.

## Выражения POSIX (POSIX bracket expression)
Частью стандартизации POSIX было появление выражения в скобках, которое бы помогали находить наборы символов. Это похоже на условные обозначения набров символов. Не стоит смешивать выражения POSIX с обычными услвоными обозначениями.

    [:alpha:]     alphabetic characters                 A-Za-z
    [:digit:]     numeric characters                    0-9
    [:alnum:]     alphanumeric characters               A-Za-z0-9
    [:lower:]     lowercase alphabetic characters       a-z
    [:upper:]     uppercase alphabetic characters       A-Z
    [:punct:]     punctuation characters
    [:space:]     space characters                      \s
    [:blank:]     blank characters (space, tab)
    [:print:]     printable characters, spaces
    [:graph:]     printable characters, no spaces
    [:cntrl:]     control characters (non-printable)
    [:xdigit:]    hexadecimal characters                A-Fa-f0-9

Пример:
- `[[:alpha:]]` - выбрать все буквы прописные и строчные,

Поддерживаются языками: Perl, PHP, Ruby, Unix  
Не поддерживается: Java, JavaScript, .NET, Python
