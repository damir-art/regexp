# Выражения с анкерами (якорями)

## Анкера начала и конца (start and end anchors)
- `^`  - start of string/line (первый символ в регулярном выражении)
- `$`  - end of string/line (последний символ в регулярном выражении)
- `\A` - start of string, never end of line
- `\Z` - end of string, never end of line

Анкеры ссылаются на позицию, а не на конкретный символ. У них нулевая ширина:
- `^apple` - искать apple  в начале строки,
- `apple$` - искать apple в конце строки,
- `^apple$` - искать apple в начале или конце строки.

`^`, `$` - поддерживаются во всех движках регулярных выражений,  
`\A`, `\Z` - JAVA, .NET, Perl, PHP, Python, Ruby.  

- `^[A-Z][A-Za-z\-. ]+\.$` - соответствие полной строки целиком,
- `^\w+@w+\.[a-z]{3}$` - это подходит например для емаила, соответствует `nobody@nowhere.com`,
- `^[\t ]+` - соответствует табуляции или пробелу сначала.

## Переносы строк и мультистрочный режим (line breaks and multiline mode)
По-умолчанию движок регулярных выражений использует однострочный режим. Если есть перенос строки то анкеры им не соответсвуют. Если хотите работать в мультистрочном режиме нужно на него перевести движок регулярных выражений. Тогда анкеры начнут соответствовать началу и концу подстрок, а не просто строк. `\A` и `\Z` всегда игнорируют переносы строк.

JavaScript: `/^regex$/m`
PHP: `preg_match(/^regex$/m, "string")`

Для включения мультистрочного режима нужно добавить символ `m`.

Пример:

    ^[a-z ]+

    milk
    apple juice
    yogurt

## Границы слов (word boundaries)
`\b` граница слова (начало или конец), `\B` не граница слова. Ссылаются на позицю, а не конкретный символ.

Как определяется является ли что-то границей:
- первый буквенный символ во всей строке
- в конце строки у последнего буквенного символа
- между началом и концом строки, когда буквенный символ сменяется на не буквенный

Пример соответсвия с границами:
- `\b\w+\b` - This is a test - выделит все 4 слова,
- `\b\w+\b` - abc_123 - выделит всё слово,
- `\b\w+\b` - top-notch - выделит 2 слова.

`\b\w+\b` - ищем любой повторяющийся символ с границами с обеих сторон (выберутся все слова),  
`\b\[w']+\b` - если в слове есть апострофы, например `summer's`,  
`\b\[w']+?\b` - не жадно, граница слов проверяется постоянно после каждого символа.

Не граница:
- `\BThis` - This is a test - не выделит (ищем This который находится не на границе)
  - x`This` is a test - выделится если перед ним ввести символ
- `\B\w+\B` - T`hi`s is a t`es`t

Улучшаем эффективность:
- `\b\w+s\b` - `apples`, движок проверяет только целые слова

В регулярных выражениях, пробел это не граница слова, здесь граница слова ссылается на позицию, а не на символ:
Пример:
- строка: `apples and oranges`
- no match: `/apples\band\boranges/`
- match: `/apples\b \band\b \boranges/`
